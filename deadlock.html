<!DOCTYPE html>
<html lang="en" xml:lang="en" >
<head>
  <title>Deadlock</title>
<meta http-equiv="Type" content="text/html; charset=utf-8" />
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="copyright"
content="Copyright &#169; 2020 University of Kashan (Ahmad Yoosofan)" />
   <meta name="author" content="Ahmad Yoosofan" />
  <link rel="stylesheet" type="text/css" media="screen, projection, print" href="../../tools/Slidy2/styles/slidy.css" />
  <!-- <link rel="stylesheet" type="text/css" media="screen, projection, print" href="../../tools/Slidy2/styles/w3c-blue.css" /> -->
  <script src="../../tools/Slidy2/scripts/slidy.js" charset="utf-8" type="text/javascript"></script>
  <link href="../../tools/yoosofan_slides.css" rel="stylesheet" type="text/css" />
  <meta name="font-size-adjustment" content="-1" />
 <!-- <meta name="duration" content="5" /> -->
<style type="text/css">
    .highlight pre td.linenos { background-color: #f0f0f0; padding-right: 10px; }
    .highlight pre span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
    .highlight pre { line-height: 125%; }
    .highlight pre  .hll { background-color: #ffffcc }
    .highlight pre   { background: #f8f8f8; }
    .highlight pre  .c { color: #408080; font-style: italic } /* Comment */
    .highlight pre  .err { border: 1px solid #FF0000 } /* Error */
    .highlight pre  .k { color: #008000; font-weight: bold } /* Keyword */
    .highlight pre  .o { color: #666666 } /* Operator */
    .highlight pre  .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
    .highlight pre  .cm { color: #408080; font-style: italic } /* Comment.Multiline */
    .highlight pre  .cp { color: #BC7A00 } /* Comment.Preproc */
    .highlight pre  .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
    .highlight pre  .c1 { color: #408080; font-style: italic } /* Comment.Single */
    .highlight pre  .cs { color: #408080; font-style: italic } /* Comment.Special */
    .highlight pre  .gd { color: #A00000 } /* Generic.Deleted */
    .highlight pre  .ge { font-style: italic } /* Generic.Emph */
    .highlight pre  .gr { color: #FF0000 } /* Generic.Error */
    .highlight pre  .gh { color: #000080; font-weight: bold } /* Generic.Heading */
    .highlight pre  .gi { color: #00A000 } /* Generic.Inserted */
    .highlight pre  .go { color: #888888 } /* Generic.Output */
    .highlight pre  .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
    .highlight pre  .gs { font-weight: bold } /* Generic.Strong */
    .highlight pre  .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
    .highlight pre  .gt { color: #0044DD } /* Generic.Traceback */
    .highlight pre  .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
    .highlight pre  .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
    .highlight pre  .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
    .highlight pre  .kp { color: #008000 } /* Keyword.Pseudo */
    .highlight pre  .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
    .highlight pre  .kt { color: #B00040 } /* Keyword.Type */
    .highlight pre  .m { color: #666666 } /* Literal.Number */
    .highlight pre  .s { color: #BA2121 } /* Literal.String */
    .highlight pre  .na { color: #7D9029 } /* Name.Attribute */
    .highlight pre  .nb { color: #008000 } /* Name.Builtin */
    .highlight pre  .nc { color: #0000FF; font-weight: bold } /* Name.Class */
    .highlight pre  .no { color: #880000 } /* Name.Constant */
    .highlight pre  .nd { color: #AA22FF } /* Name.Decorator */
    .highlight pre  .ni { color: #999999; font-weight: bold } /* Name.Entity */
    .highlight pre  .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
    .highlight pre  .nf { color: #0000FF } /* Name.Function */
    .highlight pre  .nl { color: #A0A000 } /* Name.Label */
    .highlight pre  .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
    .highlight pre  .nt { color: #008000; font-weight: bold } /* Name.Tag */
    .highlight pre  .nv { color: #19177C } /* Name.Variable */
    .highlight pre  .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
    .highlight pre  .w { color: #bbbbbb } /* Text.Whitespace */
    .highlight pre  .mb { color: #666666 } /* Literal.Number.Bin */
    .highlight pre  .mf { color: #666666 } /* Literal.Number.Float */
    .highlight pre  .mh { color: #666666 } /* Literal.Number.Hex */
    .highlight pre  .mi { color: #666666 } /* Literal.Number.Integer */
    .highlight pre  .mo { color: #666666 } /* Literal.Number.Oct */
    .highlight pre  .sa { color: #BA2121 } /* Literal.String.Affix */
    .highlight pre  .sb { color: #BA2121 } /* Literal.String.Backtick */
    .highlight pre  .sc { color: #BA2121 } /* Literal.String.Char */
    .highlight pre  .dl { color: #BA2121 } /* Literal.String.Delimiter */
    .highlight pre  .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
    .highlight pre  .s2 { color: #BA2121 } /* Literal.String.Double */
    .highlight pre  .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
    .highlight pre  .sh { color: #BA2121 } /* Literal.String.Heredoc */
    .highlight pre  .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
    .highlight pre  .sx { color: #008000 } /* Literal.String.Other */
    .highlight pre  .sr { color: #BB6688 } /* Literal.String.Regex */
    .highlight pre  .s1 { color: #BA2121 } /* Literal.String.Single */
    .highlight pre  .ss { color: #19177C } /* Literal.String.Symbol */
    .highlight pre  .bp { color: #008000 } /* Name.Builtin.Pseudo */
    .highlight pre  .fm { color: #0000FF } /* Name.Function.Magic */
    .highlight pre  .vc { color: #19177C } /* Name.Variable.Class */
    .highlight pre  .vg { color: #19177C } /* Name.Variable.Global */
    .highlight pre  .vi { color: #19177C } /* Name.Variable.Instance */
    .highlight pre  .vm { color: #19177C } /* Name.Variable.Magic */
    .highlight pre  .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<!--
<div class="background">
  <img id="head-icon" alt="graphic with four colored squares"
    src="http://www.w3.org/Talks/Tools/Slidy2/graphics/icon-blue.png" />
  <object id="head-logo" title="W3C logo" type="image/svg+xml"
    data="http://www.w3.org/Talks/Tools/Slidy2/graphics/w3c-logo-white.svg"><img
   src="http://www.w3.org/Talks/Tools/Slidy2/graphics/w3c-logo-white.gif"
   alt="W3C logo" id="head-logo-fallback" /></object>
</div>
  -->
<div class="slide cover" style="text-align:center;"><br /><br /><br /><br /><br />
 <p><h1>
   Operating Systems
 </h1></p><br />
 <p><h2>Deadlock</h2></p><br /><br /><br />
 <p><a href="http://yoosofan.kashanu.ac.ir/">Ahmad Yoosofan</a></p>
 <p> Spring 2020 </p>
 <p>University of Kashan </p>
 <p><a href="yoosofan@kashanu.ac.ir">yoosofan@myfastmail.com</a></p>
</div>
<div class="slide"><br /><br /><p></p><p><h1>Deadlock in real situations</h1></p><br /><br />
<table>
<tr>
<td>
  <img src="img/deadlock/deadlock_automobiles.png" alt="Cover page images (keys)" class="cover" height="95%" width="95%" />
</td>
<td>
  <img src="img/deadlock/trafficDeadlock1.gif" alt="Cover page images (keys)" class="cover" height="95%" width="95%" />
</td>
</tr>
</table>
</div>
<!--http://cs.nyu.edu/~gottlieb/courses/2000-01-spring/os/chapters/chapter-6.html-->

<div class="slide"><br /><br /><p><h1>Resource-Allocation Graph</h1></p>
<table>
  <tr>
    <td>
      <ul class="incremental">
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>,</li>
          </ul>
        </li>
      </ul>
    </td>
    <td class="incremental">
      <img src="img/deadlock/resource_allocation_graph1.svg" />
    </td>
  </tr>
</table>
</div>
<div class="slide"><br /><br /><p><h1>Resource-Allocation Graph</h1></p>
<table>
  <tr>
    <td>
      <ul>
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>,</li>
            <li>R<sub>1</sub> → P<sub>0</sub>,</li>
          </ul>
        </li>
      </ul>
    </td>
    <td>
      <img src="img/deadlock/resource_allocation_graph2.svg" />
    </td>
  </tr>
</table>
</div>

<div class="slide"><br /><br /><p><h1>Request</h1></p>
<table>
  <tr>
    <td>
      <ul>
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>, </li>
            <li>R<sub>1</sub> → P<sub>0</sub>,</li>
            <li>P<sub>1</sub> → R<sub>1
            </sub>,</li>
          </ul>
          }
        </li>
      </ul>
    </td>
    <td>
      <img src="img/deadlock/resource_allocation_graph3.svg" />
    </td>
  </tr>
</table>
</div>
<div class="slide"><br /><br /><p><h1>Resource-Allocation Graph</h1></p>
<table>
  <tr>
    <td>
      <ul>
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>,</li>
            <li>R<sub>1</sub> → P<sub>0</sub>,</li>
            <li>P<sub>1</sub> → R<sub>1</sub>,</li>
            <li>R<sub>2</sub> → P<sub>1</sub>,</li>
            <li>R<sub>3</sub> → P<sub>2</sub> </li>
          </ul>
          }
        </li>
      </ul>
    </td>
    <td>
      <img src="img/deadlock/resource_allocation_graph4.svg" />
    </td>
  </tr>
</table>
</div>
<div class="slide"><br /><br /><br /><p><h1>Wait-For Graph</h1></p>
<table style="margin:auto;">
  <tr ><td>Resource-Allocation Graph</td><td>Wait-For Graph</td></tr>  
  <tr>
    <td>
      <img src="img/deadlock/resource_allocation_graph4.svg" />
    </td>
    <td>
      <img src="img/deadlock/wait_for_graph.svg" width="300px" height="300px" />
    </td>
  </tr>
</table>
</div>
<div class="slide"><br /><br /><p><h1>Multiple Instances</h1></p>
<table>
  <tr>
    <td>
      <ul>
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>,</li>
            <li>R<sub>1</sub> → P<sub>0</sub>,</li>
            <li>P<sub>1</sub> → R<sub>1</sub>,</li>
            <li>R<sub>2</sub> → P<sub>1</sub>,</li>
            <li>R<sub>3</sub> → P<sub>2</sub> </li>
            <li>}</li>
            <li>One instances of resource type R0</li>
            <li>Two instances of resource type R1</li>
            <li>One instances of resource type R2</li>
            <li>Three instances of resource type R3</li>
          </ul>
      </ul>
    </td>
    <td>
      <img src="img/deadlock/resource_allocation_graph4_multiple.svg" />
    </td>
  </tr>
</table>
</div>

<div class="slide"><br /><br /><p><h1>Multiple Instances</h1></p>
<table>
  <tr>
    <td>
      <ul>
        <li>The set of Processes; P = {P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>}</li>
        <li>The set of Resources; R = {R<sub>0</sub>, R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>}</li>
        <li>The set of Edges    ; E = {
          <ul>
            <li>R<sub>0</sub> → P<sub>0</sub>,</li>
            <li>R<sub>1</sub> → P<sub>0</sub>,</li>
            <li>P<sub>1</sub> → R<sub>1</sub>,</li>
            <li>R<sub>2</sub> → P<sub>1</sub>,</li>
            <li>R<sub>3</sub> → P<sub>2</sub> </li>
            <li>}</li>
            <li>One instances of resource type R0</li>
            <li>Two instances of resource type R1</li>
            <li>One instances of resource type R2</li>
            <li>Three instances of resource type R3</li>
          </ul>
      </ul>
    </td>
    <td>
      <img src="img/deadlock/resource_allocation_graph5_multiple.svg" />
    </td>
  </tr>
</table>
</div>

<div class="slide"><p><h1>Deadlock</h1></p><br /><br />
<table>
  <tr>
    <td>Non deadlock</td>
    <td>Deadlock</td>
  </tr>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_not_deadlock.svg" alt="Cover page images (keys)" class="cover" />
</td>
<td>
  <img  src="img/deadlock/deadlock_detection_deadlock1.svg" alt="Cover page images (keys)" class="cover" />
</td>
</tr>
</table>
</div>
<div class="slide"><p><h1>Deadlock</h1></p><br /><br />
<table>
    <tr>
    <td>Non deadlock</td>
    <td>Deadlock</td>
  </tr>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_not_deadlock.svg" alt="Cover page images (keys)" class="cover" />
</td>
<td>
  <img  src="img/deadlock/deadlock_detection_deadlock2.svg" alt="Cover page images (keys)" class="cover" />
</td>
</tr>
</table>
</div>
<div class="slide"><br /><br /><br /><p><h1>Necessary Conditions of deadlock</h1></p><br /><br />
<p><p><ol class="incremental">
  <li>Mutual exclusion</li>
  <li>Hold and wait</li>
  <li>No preemption</li>
  <li>Circular wait
  <ul class="incremental">
    <li>R0 &lt; R1 &lt; R2 &lt;  ...  &lt; Rm</li>
  </ul></li>
</ol></p></p>
</div>
<div class="slide"><br /><br /><br /><p><h1>Deadlock Detection</h1></p><br /><br />
<ul class="incremental">
  <li>1- Single Instance of Each Resource Type</li>
  <ul class="incremental"><li>Finding loop in a graph</li></ul>
  <li>2- Several Instances of a Resource Type</li>
  <ul class="incremental">
    <li>Available. A vector of length m indicates the number of available resources
of each type.</li>
    <li class="li_2">Avail = [ R<sub>0</sub>, R<sub>1</sub>, ... , R<sub>m</sub> ]</li>
    <li>Allocation. An (n * m) matrix defines the number of resources of each type
currently allocated to each process.</li>
    <li>Request. An (n * m) matrix indicates the current request of each process.
If Request[i][j] equals k, then process P<sub>i</sub> is requesting k more instances of
resource type R<sub>j</sub>.</li>
  </ul>
</ul>
</div>
<div class="slide"><h1>Example of Resource-Allocation</h1>
<table>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_not_deadlock.svg" alt="Cover page images (keys)" class="cover" />
</td>
<td>
  <table>
    <tr>
      <td class="incremental">Resources = </td>
      <td class="incremental">
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr class="incremental">
            <td class="incremental">2</td>
            <td class="incremental">1</td>
            <td class="incremental">2</td>
            <td class="incremental">2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr class="incremental">
      <td>Avaiable = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
          </tr>
        </table>
    </td>
    <tr class="incremental">
      <td>Allocation = </td>
      <td class="incremental">
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr class="incremental">
            <th>P<sub>0</sub></th>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>1</sub></th>
            <td class="incremental">1</td>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>2</sub></th>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>3</sub></th>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
            <td class="incremental">1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr class="incremental">
    <td>Request = </td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr class="incremental">
          <th>P<sub>0</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>1</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>2</sub></th>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>3</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
</tr>
</table>
</div>
<div class="slide"><small><h1>Example of Resource-Allocation</h1></small>
<table>
<tr>
<td>
  <table>
    <tr>
      <td>Resources = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation = </td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request = </td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
<td>
  <ol class ="incremental">
    <li> Process 3
      <ul class="incremental">
        <li>finish[3]== false and Request[3]&lt;=work</li>
        <li>finish[3]=true;  work+=Allocatin[3];</li>
        <li>work = { 0 , 0 , 1 , 2 }</li>
      </ul>
      </li>
  </ol>
</td>
</tr>
</table>
</div>
<div class="slide"><small><small><h1>Example of Resource-Allocation</h1></small></small>
<table>
<tr>
<td>
  <table>
    <tr>
      <td>Resources = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation = </td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request = </td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
<td>
  <ol>
    <li> Process 3
      <ul>
        <li>finish[3]== false and Request[3]&lt;=work</li>
        <li>finish[3]=true;  work+=Allocation[3];</li>
        <li>work = { 0 , 0 , 1 , 2 }</li>
      </ul>
      </li>
    <li> Process 1
      <ul class="incremental">
        <li>finish[1]== false and Request[1]&lt;=work</li>
        <li>finish[1]=true;  work+=Allocation[1];</li>
        <li>work = { 1 , 1 , 1 , 2 }</li>
      </ul>
      </li>
  </ol>
</td>
</tr>
</table>
</div>
<div class="slide"><small><small><h1>Example of Resource-Allocation</h1></small></small>
<table>
<tr>
<td>
  <table>
    <tr>
      <td>Resources = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation = </td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request = </td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
<td>
  <ol>
    <li> Process 3
      <ul>
        <li>finish[3]== false and Request[3]&lt;=work</li>
        <li>finish[3]=true;  work+=Allocation[3];</li>
        <li>work = { 0 , 0 , 1 , 2 }</li>
      </ul>
      </li>
    <li> Process 1
      <ul>
        <li>finish[1]== false and Request[1]&lt;=work</li>
        <li>finish[1]=true;  work+=Allocation[1];</li>
        <li>work = { 1 , 1 , 1 , 2 }</li>
      </ul>
      </li>
    <li> Process 2
      <ul class="incremental">
        <li>finish[2]== false and Request[2]&lt;=work</li>
        <li>finish[2]=true;  work+=Allocation[2];</li>
        <li>work = { 1 , 1 , 2 , 2 }</li>
      </ul>
      </li>
  </ol>
</td>
</tr>
</table>
</div>
<div class="slide"><small><small><h1>Example of Resource-Allocation</h1></small></small>
<table>
<tr>
<td>
  <table>
    <tr>
      <td>Resources = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable = </td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation = </td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request = </td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
<td>
  <small>
  <ol>
    <li> Process 3
      <ul>
        <li>finish[3]== false and Request[3]&lt;=work</li>
        <li>finish[3]=true;  work+=Allocation[3];</li>
        <li>work = { 0 , 0 , 1 , 2 }</li>
      </ul>
      </li>
    <li> Process 1
      <ul>
        <li>finish[1]== false and Request[1]&lt;=work</li>
        <li>finish[1]=true;  work+=Allocation[1];</li>
        <li>work = { 1 , 1 , 1 , 2 }</li>
      </ul>
      </li>
    <li> Process 2
      <ul>
        <li>finish[2]== false and Request[2]&lt;=work</li>
        <li>finish[2]=true;  work+=Allocation[2];</li>
        <li>work = { 1 , 1 , 2 , 2 }</li>
      </ul>
      </li>
    <li> Process 0
      <ul class="incremental">
        <li>finish[0]== false and Request[0]&lt;=work</li>
        <li>finish[0]=true;  work+=Allocation[0];</li>
        <li>work = { 2 , 1 , 2 , 2 }</li>
      </ul>
      </li>
      <li class="incremental">Sequence of execution: 3 , 1 , 2 , 0</li>
      <li class="incremental">Sequence of execution: 3 , 1 , 0 , 2</li>
  </ol>
  </small>
</td>
</tr>
</table>
</div>
<div class="slide"><h1>Deadlock Example 1</h1>
<small>
<table>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_deadlock1.svg" alt="Cover page images (keys)" class="cover" height="90%" width="80%" />
</td>
<td>
  <table>
    <tr>
      <td class="incremental">Resources</td><td class="incremental">=</td>
      <td class="incremental">
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr class="incremental">
            <td class="incremental">2</td>
            <td class="incremental">1</td>
            <td class="incremental">2</td>
            <td class="incremental">2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr class="incremental">
      <td>Avaiable</td><td class="incremental">=</td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
          </tr>
        </table>
    </td>
    <tr class="incremental">
      <td>Allocation</td><td class="incremental">=</td>
      <td class="incremental">
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr class="incremental">
            <th>P<sub>0</sub></th>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>1</sub></th>
            <td class="incremental">1</td>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>2</sub></th>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
            <td class="incremental">0</td>
          </tr>
          <tr class="incremental">
            <th>P<sub>3</sub></th>
            <td class="incremental">0</td>
            <td class="incremental">0</td>
            <td class="incremental">1</td>
            <td class="incremental">1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr class="incremental">
    <td>Request</td><td class="incremental">=</td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr class="incremental">
          <th>P<sub>0</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>1</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>2</sub></th>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
        <tr class="incremental">
          <th>P<sub>3</sub></th>
          <td class="incremental">0</td>
          <td class="incremental">1</td>
          <td class="incremental">0</td>
          <td class="incremental">0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
</tr>
<tr><td class="incremental">There is no process which its Request[i] &lt;= work</td></tr>
</table>
</small>
</div>
<div class="slide"><small><h1>Deadlock Example 2</h1>
<table>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_deadlock2.svg" alt="Cover page images (keys)" class="cover" />
</td>
<td>
  <table>
    <tr>
      <td>Resources</td><td>=</td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable</td><td>=</td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>2</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation</td><td>=</td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>2</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request</td><td>=</td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>1</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
</tr>
</table>
<ul class="incremental">
  <li>Process P3: Request[3] &lt;= work => work = { 0 , 0 , 0 , 2 }</li>
  <li>There is not another process which satisfy in this conditoin.</li>
  <li>Deadlock. List of deadlocked processes is { 0 ,  1 , 2 }</li>
</ul>
</small>
</div>
<div class="slide"><small><h1>Deadlock Example 2</h1>
<table>
<tr>
<td>
  <img  src="img/deadlock/deadlock_detection_deadlock2.svg" alt="Cover page images (keys)" class="cover" height="80%" width="80%" />
</td>
<td>
  <table>
    <tr>
      <td>Resources</td><td>=</td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>2</td>
            <td>1</td>
            <td>2</td>
            <td>2</td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>Avaiable</td><td>=</td>
      <td>
        <table>
          <tr>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    <tr>
      <td>Allocation</td><td>=</td>
      <td>
        <table>
          <tr>
            <th> </th>
            <th>R<sub>0</sub></th>
            <th>R<sub>1</sub></th>
            <th>R<sub>2</sub></th>
            <th>R<sub>3</sub></th>
          </tr>
          <tr>
            <th>P<sub>0</sub></th>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>1</sub></th>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>2</sub></th>
            <td>0</td>
            <td>0</td>
            <td>2</td>
            <td>0</td>
          </tr>
          <tr>
            <th>P<sub>3</sub></th>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
          </tr>
        </table>
    </td>
    </tr>
    <tr>
    <td>Request</td><td>=</td>
    <td>
      <table>
        <tr>
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
          <th>R<sub>3</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>3</sub></th>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
        </tr>
      </table>
    </td>
  </tr>
  </table>
</td>
</tr>
</table>
<small>
<ul class="incremental">
  <li>Process P3: Request[3] &lt;= work => work = { 0 , 0 , 0 , 3 }</li>
  <li>There is not another process which satisfy in this conditoin.</li>
  <li>Deadlock. List of deadlocked processes is { 0 ,  1 , 2 }</li>
</ul></small>
</small>
</div>
<div class="slide"><br /><h1>Deadlock </h1><br /><br />
<ol class="incremental">
 <li> Let Work and Finish be vectors of length m and n, respectively. Initialize
Work = Available. For i = 0, 1, ..., n–1, if Allocation i <> 0, then Finish[i] =
false. Otherwise, Finish[i] = true.
 </li>
 <li> Find an index i such that both <br />
        a. Finish[i] == false <br />
        b. Request i ≤ Work <br />
       If no such i exists, go to step 4.
  </li>
  <li>Work = Work + Allocation[i]<br />
        Finish[i] = true <br />
        Go to step 2.
  <li> If Finish[i] == false for some i, 0 ≤ i < n, then the system is in a deadlock
 </li>
</ul>
</div>

<div class="slide"><br /><h1>Recovery from Deadlock </h1><br />
<ol class="incremental">
 <li> Process Termination
    <ol class="incremental">
        <li>Abort all deadlocked processes.</li>
        <li>Abort one process at a time until the deadlock cycle is eliminated.<br />
        <ol class="incremental">
          <li>
          What the priority of the process is
          </li><li>
          How long the process has computed and how much longer the process will compute before completing its designated task
          </li><li>
          How many and what types of resources the process has used (for example, whether the resources are simple to preempt)
          </li><li>
          How many more resources the process needs in order to complete
          </li><li>
          How many processes will need to be terminated
          </li><li>
          Whether the process is interactive or batch
          </li>
    </ol> </li>   </ol>
 </li>
 <li> Resource Preemption
    <ol class="incremental" ><li>Selecting a victim.
    </li><li>Rollback.
    </li><li>Starvation.
    </li></ol>
  </li>
</ol>
</div>
<div class="slide"><h1>Deadlock detection (Psudo C++ code) </h1>
<div class="highlight"><pre><span></span><span class="cm">/* ********************* 1   ************************** */</span>
<span class="kt">bool</span> <span class="n">finish</span><span class="p">[</span><span class="n">N</span><span class="p">];</span> <span class="kt">int</span> <span class="n">work</span><span class="p">[</span><span class="n">M</span><span class="p">];</span>  <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span> <span class="kt">bool</span> <span class="n">flag</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
<span class="n">work</span> <span class="o">=</span> <span class="n">Available</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="k">if</span><span class="p">(</span><span class="n">Allocation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span>    <span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="nb">false</span><span class="p">;</span>
  <span class="k">else</span>                    <span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
<span class="cm">/* ********************* 2   ************************** */</span>
<span class="n">flag</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="n">flag</span><span class="o">==</span><span class="nb">true</span><span class="p">){</span>
  <span class="n">flag</span><span class="o">=</span><span class="nb">false</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">Request</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">work</span><span class="p">){</span>
          <span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
          <span class="n">work</span> <span class="o">+=</span> <span class="n">Allocation</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
          <span class="n">flag</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="cm">/* ********************* 3   ************************** */</span>
<span class="n">flag</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="k">if</span><span class="p">(</span><span class="n">finish</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">false</span><span class="p">){</span> <span class="n">flag</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;process &quot;</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="s">&quot; is deadlocked.&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>  <span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">==</span><span class="nb">true</span><span class="p">)</span>  <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;The system is deadlocked&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="k">else</span> <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;The system is not deadlocked&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<div class="slide"><h1>Deadlock Avoidance(Banker's Algorithm) 1</h1>
<table>
  <tr>
  <td >
<img class= "incremental" src="img/deadlock/deadlock_avoidance_not_safe1.svg" alt="Cover page images (keys)" class="cover" height="250px" width="250px" />
</td><td >
<img class="incremental" src="img/deadlock/deadlock_avoidance_not_safe2.svg" alt="Cover page images (keys)" class="cover" height="250px" width="250px" />
</td><td>
<img class="incremental" src="img/deadlock/deadlock_avoidance_safe1.svg" alt="Cover page images (keys)" class="cover" height="250px" width="250px" />
</td></tr>
<tr>
  <td class="incremental">MAX =
      <table>
        <tr >
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>1</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>1</td>
        </tr>
      </table>
  <span class="incremental" >Claim edge</span>
  </td>
  <td>
    <img class="incremental" src="img/deadlock/deadlock_avoidance_not_safe2_need.svg" alt="Cover page images (keys)" class="cover" height="250px" width="250px" />
  </td>
  <td>
    <img class= "incremental" src="img/deadlock/deadlock_avoidance_safe1_need.svg" alt="Cover page images (keys)" class="cover" height="250px" width="250px" />
  </td>
</tr>
</table>
</div>
<div class="slide"><small><h1>Deadlock Avoidance(Banker's Algorithm) 2</h1>
<table>
<tr>
  <td class="incremental">MAX =
      <table>
        <tr >
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>1</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>1</td>
        </tr>
      </table>

  </td>
  <td>
    <img class="incremental" src="img/deadlock/deadlock_avoidance_not_safe2_need.svg" alt="Cover page images (keys)" class="cover" height="300px" width="300px" />
  </td>
  <td>
    <img class= "incremental" src="img/deadlock/deadlock_avoidance_safe1_need.svg" alt="Cover page images (keys)" class="cover" height="300px" width="300px" />
  </td>
</tr>

<tr>
  <td class="incremental">
    Need = MAX - Allocation
  </td>

  <td class="incremental">Need =
      <table>
        <tr >
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>0</td>
        </tr>

      </table>
  <span class="incremental">Avaiable=[ 0 , 0 , 0 ]</span>
  </td>

  <td class="incremental">Need =
      <table>
        <tr >
          <th> </th>
          <th>R<sub>0</sub></th>
          <th>R<sub>1</sub></th>
          <th>R<sub>2</sub></th>
        </tr>
        <tr>
          <th>P<sub>0</sub></th>
          <td>0</td>
          <td>1</td>
          <td>0</td>
        </tr>
        <tr>
          <th>P<sub>1</sub></th>
          <td>0</td>
          <td>0</td>
          <td>1</td>
        </tr>
        <tr>
          <th>P<sub>2</sub></th>
          <td>1</td>
          <td>0</td>
          <td>1</td>
        </tr>

      </table>
  <span class="incremental">Avaiable=[ 0 , 0 , 1 ]</span><br />
  <span class="incremental">Safe Sequence P1 , P0 , P2</span>
  </td>

</tr>

</table>
</small>
</div>
<div class="slide"><br /><h1>Safety Algorithm </h1><br /><br />
  <ol class ="incremental">
    <li>Variables
    <ul>
      <li>
        int work[m] = Avaiable
      </li>
      <li>
        bool Finish[n]={false}
      </li>
      <li>
        int Need[n][m] = MAX - Allocation
      </li>
    </ul>
  </li>
  <li>
    while exists i such that ( (Finish[i] == false) and  ( Need[i] &le; Work) )
    <ul>
      <li>Work = Work + Allocation[i] </li>
      <li>Finish[i] = true </li>
    </ul>
  <li>
    If Finish[i] ==true for all i, then the system is in a safe state.
  </li>
  </ol>
</div>

<div class="slide" dir="rtl"><br /><br /><h1>
  الگوریتم تخصیص منابع 
  </h1><br /><br />
  <ol class ="incremental">
    <li>
       اگر 
       Need &le; Request
       آن‌گاه خطایی را ایجاد کن زیرا فرایند بیشتر از مقدار حداکثری که
       گفته است منبع می‌خواهد دریافت کند وگرنه به گام ۲ برو 
</li>

  <li>
    اگر فرایندی با شمارهٔ i یافت شد که 
    Request<sub>i</sub> &le; Available, 
    باشد آن‌گاه
    به گام ۳ برو وگرنه فرایند i ام باید منتظر بماند زیرا منبع درخواستی‌اش 
    در دسترس نیست.
</li>
<li>
  فرض می‌کنیم که منابع مورد نیاز فرایند را در اختیارش بگذاریم یعنی
  کارهای زیر را انجام دهیم
  <ul dir="ltr" class="incremental">
  <li>  Available= Available- Request<sub>i</sub> </li>
  <li>  Allocation<sub>i</sub> =Allocation<sub>i</sub> +Request<sub>i</sub>   </li>
  <li>Need<sub>i</sub>  =Need<sub>i</sub> - Request<sub>i</sub> </li>
  </ul>
 </li>
  <li>
    الگوریتم امن بودن را روی وضعیت شبیه‌سازی شدهٔ کنونی اجرا می‌کنیم
  </li>   <li>
    اگر وضعیت امن بود تخصیص واقعی را انجام می‌دهیم وگرنه تخصیص را انجام نمی‌دهیم
    و وضعیت آرایه‌ها و ماتریس‌ها را به حالت پیش از تغییر در گام ۳ برمی‌گردانیم
    </li>
  </ol>
</div>
<!--
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow>
    <mtable>
      <mtr>
        <mtd>
          <msub>
                  <mi>R</mi>
                <mn>0</mn>
          </msub>
        </mtd>
        <mtd>
          <msub>
                  <mi>R</mi>
                <mn>1</mn>
          </msub>
        </mtd>
        <mtd>
          <msub>
                  <mi>R</mi>
                <mn>2</mn>
          </msub>
        </mtd>
        <mtd>
          <msub>
                  <mi>R</mi>
                <mn>3</mn>
          </msub>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
                  <mi>P</mi>
                <mn>0</mn>
          </msub>
        </mtd>
        <mtd>
          <mrow>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>2</mn>
                </mtd>
                <mtd>
                  <mn>3</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
          </mrow>
        </mtd>
        <mtd>
        </mtd>
        <mtd>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
                  <mi>P</mi>
                <mn>1</mn>
          </msub>
        </mtd>
        <mtd>
        </mtd>
        <mtd>
        </mtd>
        <mtd>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
                  <mi>P</mi>
                <mn>2</mn>
          </msub>
        </mtd>
        <mtd>
        </mtd>
        <mtd>
        </mtd>
        <mtd>
        </mtd>
      </mtr>
    </mtable>
  </mrow>
  </math>
-->
</body> </html>
